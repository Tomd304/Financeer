{% extends "layout_search.html" %}

{% block title %} Homepage {% endblock %}

{% block script %}
<script>
    var ctx = document.getElementById('myChart');
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
            datasets: [{
                label: '# of Votes',
                data: [12, 19, 3, 5, 2, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
{% endblock %}

{% block body %}

<div class="container">
    <div class="jumbotron">
        <h1 class="display-4">{{company.shortName}} ({{company.symbol}})</h1>
        <br />
        <p class="lead">Current Price: {{price.price[-1] | currency(company.currency)}}</p>
        {% if (price.price[-1] > price.price[-2]) %}
        <p class="lead positive">
            {% else %}
        <p class="lead negative">
            {% endif %}
            Change: {{ price.dailychange | currency(company.currency)}} ({{price.percdailychange | percentage}})
        </p>
        <p class="lead">Security Type: {{company.quoteType.capitalize()}}</p>
        <hr class="my-4">

        <p class="lead">
            {% if company.description %}
            {{ company.description }}
            {% elif company.longBusinessSummary %}
            {{ company.longBusinessSummary }}
            {% endif %}
        </p>
        <form method="post">
            {% if watched %}
            <button type="submit" class="btn btn-light btn-outline-dark btn-lg" value="{{company.symbol}}" name="removewatch">Watched</button>
            {% else %}
            <button type="submit" class="btn btn-dark btn-outline-light btn-lg" value="{{company.symbol}}" name="watch">Watchlist+</button>
            {% endif %}
        </form>
    </div>

    <div class="container">
        {% if company.country %}
        <p>Country: {{company.country}}</p>
        {% endif %}
        <p>Exchange: {{company.exchange}}</p>
        {% if company.sector %}
        <p>Sector: {{company.sector}}</p>
        {% endif %}
    </div>
    
    <canvas id="myChart" width="400" height="400"></canvas>

</div>


{% endblock %}


